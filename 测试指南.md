# 🧪 测试指南

## 本地测试

### 方法1：直接打开
```
双击 index.html 文件
```

### 方法2：使用Python服务器（推荐）
```bash
python -m http.server 8000
```
然后访问：http://localhost:8000

### 方法3：使用Node.js
```bash
npx serve
```

---

## 测试步骤

### 1️⃣ 测试注册功能

**步骤：**
1. 打开网站，应该看到登录页面
2. 点击"立即注册"
3. 填写信息：
   - 邮箱：test@example.com
   - 用户名：testuser
   - 密码：123456
4. 点击"注册"

**预期结果：**
- ✅ 显示"正在获取位置信息..."
- ✅ 显示"注册成功！正在登录..."
- ✅ 自动跳转到主页
- ✅ 看到3D地球
- ✅ 看到你的位置标记

---

### 2️⃣ 测试用户名验证

**测试1：Emoji检测**
- 用户名：test😀user
- 预期：❌ "用户名不能包含emoji表情"

**测试2：重复用户名**
- 退出登录
- 注册新账号，使用相同用户名
- 预期：❌ "用户名已被使用"

**测试3：重复邮箱**
- 使用相同邮箱注册
- 预期：❌ "该邮箱已注册"

**测试4：设备限制**
- 尝试注册第三个账号
- 预期：❌ "此设备已注册过账号"

---

### 3️⃣ 测试登录功能

**步骤：**
1. 点击"退出"
2. 输入正确的邮箱和密码
3. 点击"登录"

**预期结果：**
- ✅ 成功登录
- ✅ 看到主页

**测试错误登录：**
- 输入错误密码
- 预期：❌ "邮箱或密码错误"

---

### 4️⃣ 测试3D地球

**检查项：**
- ✅ 地球自动旋转
- ✅ 看到蓝色线框地球
- ✅ 看到用户标记（蓝色发光球）
- ✅ 看到用户名标签
- ✅ 标签跟随地球旋转
- ✅ 标签有透明度变化

---

### 5️⃣ 测试头像上传

**步骤：**
1. 点击右上角头像（或"设置"）
2. 点击"选择文件"
3. 选择一张图片（小于2MB）
4. 上传

**预期结果：**
- ✅ 头像立即更新
- ✅ 导航栏头像更新
- ✅ 地球上的标记头像更新
- ✅ 显示"头像更新成功！"

**测试大文件：**
- 上传超过2MB的图片
- 预期：❌ "文件大小不能超过2MB"

---

### 6️⃣ 测试统计功能

**检查项：**
- ✅ 底部显示统计面板
- ✅ "Users"显示正确数量
- ✅ "Countries"显示正确数量

**测试多用户：**
1. 打开隐私/无痕模式
2. 注册新账号
3. 回到原窗口刷新
4. 预期：统计数字增加

---

### 7️⃣ 测试响应式设计

**步骤：**
1. 按F12打开开发者工具
2. 切换到移动设备模式
3. 测试不同屏幕尺寸

**预期结果：**
- ✅ 手机屏幕正常显示
- ✅ 平板屏幕正常显示
- ✅ 按钮和文字大小适配
- ✅ 统计面板适配

---

### 8️⃣ 测试自动登录

**步骤：**
1. 登录后关闭浏览器
2. 重新打开网站

**预期结果：**
- ✅ 自动登录
- ✅ 直接显示主页
- ✅ 不需要重新输入密码

---

### 9️⃣ 测试数据持久化

**步骤：**
1. 注册账号
2. 上传头像
3. 刷新页面

**预期结果：**
- ✅ 用户数据保留
- ✅ 头像保留
- ✅ 登录状态保留

---

### 🔟 测试退出功能

**步骤：**
1. 点击"退出"按钮
2. 确认退出

**预期结果：**
- ✅ 显示确认对话框
- ✅ 退出后返回登录页面
- ✅ 刷新页面仍在登录页面

---

## 浏览器兼容性测试

### Chrome ✅
- 打开Chrome浏览器测试

### Firefox ✅
- 打开Firefox浏览器测试

### Edge ✅
- 打开Edge浏览器测试

### Safari ✅
- 打开Safari浏览器测试（Mac）

---

## 性能测试

### 检查项：
- ✅ 页面加载速度 < 2秒
- ✅ 3D渲染流畅（60fps）
- ✅ 动画平滑无卡顿
- ✅ 内存占用合理

---

## 常见问题排查

### 问题1：3D地球不显示
**解决方案：**
- 检查浏览器是否支持WebGL
- 访问：https://get.webgl.org/
- 更新显卡驱动

### 问题2：无法获取位置
**解决方案：**
- 检查网络连接
- ipapi.co API可能有请求限制
- 等待几秒后重试

### 问题3：头像上传失败
**解决方案：**
- 检查文件大小 < 2MB
- 确保是图片格式（JPG/PNG）
- 清除浏览器缓存

### 问题4：数据丢失
**原因：**
- 清除了浏览器数据
- 使用了隐私模式
- 切换了浏览器

**解决方案：**
- 数据存储在LocalStorage
- 不要清除浏览器数据
- 使用同一浏览器

---

## 部署测试

### Vercel部署后测试：

1. **访问部署的URL**
2. **测试所有功能**
3. **检查HTTPS是否正常**
4. **测试移动端访问**
5. **分享给朋友测试**

---

## 测试清单

- [ ] 注册功能正常
- [ ] 登录功能正常
- [ ] 用户名验证正常
- [ ] Emoji检测正常
- [ ] 设备限制正常
- [ ] 3D地球显示正常
- [ ] 用户标记显示正常
- [ ] 头像上传正常
- [ ] 统计功能正常
- [ ] 自动登录正常
- [ ] 退出功能正常
- [ ] 响应式设计正常
- [ ] 多浏览器兼容
- [ ] 性能流畅

---

**全部测试通过后即可正式使用！** ✅

